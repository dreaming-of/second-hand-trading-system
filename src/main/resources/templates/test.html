<html xmlns:th="http://www.thymeleaf.org">

<head>
    <link rel="stylesheet" href="css/mycss.css">
    <link rel="stylesheet" href="layui/css/layui.css">
    <script src="layui/layui.js"></script>
    <script src="js/jquery-3.5.1.min.js"></script>
    <title>首页</title>
</head>


<form class="layui-form" action="/test">

    

    <div class="layui-form-item">
        <label class="layui-form-label">学号</label>
        <div class="layui-input-block">
            <input type="text" name="student_number" maxlength="10" id="sn" required lay-verify="required" placeholder="请输入你的学号"
                autocomplete="off" class="layui-input" style="width: 200px;">
        </div>
        <button type="button" id="btn" class="layui-btn">点击</button>
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label">文本域</label>
            <div class="layui-input-block">
                <textarea name="desc" placeholder="请输入内容" class="layui-textarea">[[${session.LoginUser.user_id}]]</textarea>
            </div>
        </div>
    </div>
</form>

<script>
    $(function () {
        $('#sn').blur(function () {
            var sn = $('#sn').val();
            $.ajax({
                method: 'get',
                url: "/test",
                data: {
                    id: sn
                },
                dataType: "json",
                success: function (res) {
                    var flag = res["flag"];
                    if (!flag){
                        $('textarea').val("该学号未被注册，可以使用");
                    }else{
                        $('textarea').val("该学号已被注册");
                    }
                }
            })
        })
    })
</script>

</html>